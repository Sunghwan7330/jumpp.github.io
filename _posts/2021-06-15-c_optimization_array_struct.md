---
title: "[C코드 최적화] 집합원소 저장의 효율적 방법"
excerpt: "해당 내용은 '임베디드 프로그래밍 C코드 최적화' 책의 story 13에 내용을 정리하였습니다. "

categories:
  - 'embedded_c_optimization'
tags:
  - c코드 최적화
  - 북스터디
  - 최적화
  - 배열
  - 구조체
  - 유니온

toc: true
toc_sticky: true

date: 2021-06-15
last_modified_at: 2021-06-15
---

# 개요 

(작성중)

# 배열 엑세스 

아래에 작성하는 방법은 최적화 관점에서 작성한 내용입니다. 
과도한 최적화는 코드가 지저분해질 수 있으니 참고하여 적절히 활용해주는게 좋습니다. 

## 루프를 이용한 배열 액세스

```c
for (i=0; i<10; i++){
  a[i] = i + 1;
}
```

루프를 이용한 배열 접근은 프로그래머에게 가장 익숙한 방법입니다. 
하지만 효과적인 방법은 아닙니다. 

`루프변수 i의 접근`, `반복조건 확인 및 비교`, `변수의 증가` 가 반복적으로 수행되어 오버헤드가 발생하기 때문입니다.

하지만 가독성면에서는 좋기 때문에 많이 사용하는 방법입니다. 

## 인덱스 증감을 이용한 배열 

```c
i = 0;
a[i++] = k * PI;
a[i++] = 1 * PI;
a[i] = 3 * PI;
```

배열 인덱스를 증감시켜 배열에 접근하는 방법은 속도면에서 아주 효과적입니다. 

루프를 이용했을때와 같은 오버헤드가 발생하지 않고, 주소의 오프셋만 계산하면 되기 때문에 비용을 훨씬 줄일 수 있습니다. 

이와 같은 방법은 각 요소에 저장할 값들이 연관성이 없고 서로 다른 값으로 초기화해야 할 경우에 유용합니다. 

## 하드코드 배열 액세스

```c
a[0] = k * PI;
a[1] = 1 * PI;
a[2] = 3 * PI;
```

하드 코드 배열 접근 방법은 가장 효율적입니다. 각 요소의 주소가 컴파일시에 계산되기 때문입니다. (이정도는 컴파일러가 최적화해줄것 같기도 한데....?)


