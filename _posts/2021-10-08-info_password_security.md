---
title: "안전한 비밀번호 저장"
excerpt: "네이버 기술블로그에 작성된 '안전한 패스워드 저장' 을 보고 작성하였습니다. "

categories:
  - 'infomation'
tags:
  - password
  - hash
  - PBKDF2

date: 2021-10-08
last_modified_at: 2021-10-08
---

# 개요 

네이버 기술블로그에 작성된 '안전한 패스워드 저장' 을 보고 작성하였습니다. 

이번에도 역시 모르는 사람이 보아도 이해할 수 있을 정도로 단순하게 작성해보도록 하겠습니다. 

# 가장 단순한 방법

가장 단순한 방법은 역시 비밀번호를 그대로 저장하는 방법입니다. 
사용자 정보 등록시 ID 와 비밀번호를 평문으로 DB에 저장하는 방벙이죠. 
로그인시에는 요청된 ID 와 비밀번호가 DB의 값과 일지하는지 확인하면 됩니다. 

당연하게도 이는 보안에 매우 취약합니다. 
통신 과정에서 비밀번호가 탈취될 수도 있으며, 최악의 경우 서버의 DB가 탈취되면 모든 사용자의 비밀번호를 알 수 있기 때문입니다. 
그렇기때문에 요즘에는 이러한 방식으로 비밀번호를 저장하지 않습니다.

만약 아직도 비밀번호의 평문을 저장하는 시스템이 있다면......  생각만해도 끔찍하네요. ㅠㅠ

# 해시함수를 이용한 방법 

해시함수는 단방향 함수입니다. 즉 어떠한 값을 해싱하여 나온 결과값을 가지고 원문을 알 수 없습니다. 
또한 원문에 조금만 바뀌어도 해시의 모든 값이 바뀐다는 특징이 있습니다. 

```
pi@raspberrypi:~/work $ echo 0123456789 > aaa
pi@raspberrypi:~/work $ md5sum aaa
3749f52bb326ae96782b42dc0a97b4c1  aaa
pi@raspberrypi:~/work $ echo 0123456788 > bbb
pi@raspberrypi:~/work $ md5sum bbb
80f11ae13a48c1e74537a72aa445b399  bbb
```

이 처럼 비밀번호를 해시로 변경하여 보관한다면 좀 더 안전하게 보관할 수 있습니다. 

비밀번호를 잊어버려 찾을 경우에 대부분의 웹사이트에서 비밀번호를 알려주지 않고 변경하게끔 하는 이유도 이와 같습니다.
이미 해시로 보관하고 있기 때문에 비밀번호의 원문을 모르기 때문입니다. 

## 단점 1 : 인식 가능성 

위에서 본 바와 같이 해시함수는 원문을 전혀 알아볼 수 없는 메시지로 변경합니다. 
그런데 이를 인식하는 것이 가능할까요?

이론상으로는 불가능합니다. 하지만 알 수 있는 방법이 전혀 없지는 않습니다. 

메시지와 이에 대한 해시값을 저장하고 있는 테이블이 있다고 가정해봅시다. 
만약 자신이 확인하고 싶은 해시값이 테이블에 있다면, 해시값의 원본을 알 수 있습니다. 

이러한 테이블을 레인보우 테이블(rainbow table) 라고 부릅니다. 

아래의 주소는 레인보우 테이블에 해시 값을 수집하는 웹사이트입니다. 

* https://sha1.gromweb.com/

SHA-1 로 변환된 `39dfa55283318d31afe5a3ff4a0e3253e2045e43` 라는 해시값이 있습니다.  
이를 역산하여 원문을 알아내는 것은 불가능합니다. 
하지만 위의 사이트에서 해당 해시값을 입력하면 원문이 `0000` 이라는 것을 알 수 있습니다. 
실제로 `0000`을 SHA-1로 해싱하게 되면 동일한 해시값이 나타나게 됩니다. 

위와 같은 레인보우 테이블에는 비교적 간단한 비밀번호의 해시값은 모두 있습니다. 
복잡한 비밀번호의 해시값은 있을수도, 없을수도 있습니다. 
하지만 레인보우테이블의 해시값은 지금도 계속 입력되고 있습니다.

언젠가는 모든 비밀번호의 값이 레인보우테이블에 체워질 수도 있습니다. 
그렇게 되면 해시값을 이용하여 비밀번호를 유추하는 것이 가능해 질 것입니다. 

 
# 참고 

* https://d2.naver.com/helloworld/318732
