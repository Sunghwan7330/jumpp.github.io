---
title: "[임베디드 C를 윈한 TDD] 13장 레거시 코드에 테스트 추가하기"
excerpt: "해당 내용은 '임베디드 C를 위한 TDD' 책의 13장 내용을 정리하였습니다. "

categories:
  - 'embedded_c_tdd'
tags:
  - 임베디드
  - TDD

toc: true
toc_sticky: true

date: 2022-08-09
last_modified_at: 2022-08-09
---

# 개요 

6장을 포스팅한 뒤 갑자기 13장을 포스팅하게 되었습니다. 

앞부분에서 TDD 가 무엇인지를 파악한 뒤 필요한 부분 부터 보려고 하다 보니까 13장을 우선적으로 보게 되었습니다. 


# 레거시 코드 변경 정책 

* 새로운 코드는 테스트 주도로 개발한다
* 레거시 코드를 수정하기 전에 테스트를 추가한다 
* 레거시 코드에서 변경되는 것들은 테스트 주도로 개발한다 

# 보이스카우트 원칙 

보이스카우트는 `캠프를 떠날 때는 처음 왔을 때보다 더 깨끗해야 한다` 라는 단순한 원칙을 따릅니다. 
즉, 수정한 부분에 대해서는 최대한 깔끔하게 코드를 깔끔하게 작성해야 한다는 의미입니다. 

## 긴 함수에 추가하기 

긴 함수는 따로 뽑아내어 이름을 붙일만한 내용이 많을 것입니다. 
예시로 긴 함수에 새로 세줄을 추가하고자 한다면 다섯줄을 추출하도록 해보겠습니다. 
결과적으로 이 함수는 두줄이 짧아집니다. 

단, 기존 동작을 보존하기 위한 테스트는 먼저 추가되어야 합니다. 

## 복잡한 조건식에 추가하기 

조건식을 추출하여 이름을 잘 붙인 도움 함수로 만드는 방법입니다. 

새로 추가한 코드의 조건식이 다른 모듈에도 포함되는 경우가 많은데 이는 함수로 이동해야 마땅합니다. 

## 암호 같은 지역변수 이름

일단 변수의 목적을 이해했다면, 다음에 이 코드를 보게 될 여러분과 팀원들을 위해 이름을 변경하는 것이 좋습니다. 

## 과도한 중첩 

단계 깊이의 중첩을 도움 함수로 변경하는 것이 좋습니다. 
조건문이 중첩되어 있으면 보호절 형태로 바꾸어 중첩의 깊이를 낮추는 것이 좋습니다. 
