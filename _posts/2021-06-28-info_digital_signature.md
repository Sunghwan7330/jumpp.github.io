---
title: "전자서명에 대한 전반적인 이해"
excerpt: "전자서명이 무엇인지, 어떻게 서명이 이뤄지며, 어떻게 사용되는지 알아보려 합니다."

categories:
  - 'infomation'

date: 2021-06-28
last_modified_at: 2021-06-29
---

# 개요

Naver D2에서 인증서에 관련된 글을 보았습니다. 

해당 글을 읽고 정리하기 위해 포스팅을 하게 되었습니다. 

Naver D2의 글은 네이버 어플리케이션의 전자서명 원리를 기반으로 설명하고 있습니다. 

본 글에서는 어플리케이션에서의 전자서명이 아닌 좀 더 넓은 측면에서 간단히 이해하기 쉽도록 설명해보려 합니다. 

# 전자서명이란?

위키피디아에서는 전자서명을 아래와 같이 서술하였습니다. 

```
전자서명이라 함은, 서명자를 확인하고 서명자가 당해 전자문서에 서명했다는 사실을 나타내는 데 이용하려고, 특정 전자문서에 첨부되거나 논리적으로 결합된 전자적 형태의 정보를 말한다.
```

조금 더 간단히 생각해보자면 '전자'는 잠시 잊고 '서명' 만 생각해보도록 합시다. 
일반적으로 서명은 자신만 만들어낼 수 있는 문자(?)를 나타냅니다. 
서류와 같은 곳에 자신임을 인증하기 위해 이름 옆에 서명을 하곤 합니다. 

이제 다시 '전자'를 붙여보겠습니다. 

말 그대로 자신만이 나타낼 수 있는 문자.... 가 아니고 값을 제출하여 자신임을 증명하는 방법입니다. 

어떻게 전자상에서 자신을 증명할 수 있는 값을 만들어낼까요? 

전자서명을 위한 기술을 알아보도록 하겠습니다. 

# 전자 서명의 기술 기반

전자 서명을 이해하기 위한 기반이 되는 기술을 이해할 필요가 있습니다. 
해시 함수와 공개키 알고리즘이 중요한 핵심 기술이라고 할 수 있습니다. 
이 두가지 기술에 대해 간단히 알아보겠습니다. 

## 해시함수

해시 함수는 0과 1로 조합된 길게 이루어진 바이너리를 고유한 값으로 축약하는 함수입니다. 
축약하여 나온 결과값을 해시값이라고 부르게 됩니다. 

긴 바이너리가 짧아지기 때문에 축약되는 과정에서 데이터의 손실이 발생합니다. 
그렇기때문에 축약된 데이터를 원본 데이터로 변경하는것이 불가능합니다. 

또한 값을 조금만 바꾸어도 해시값이 완전히 다른 값이 나타난다는 특징이 있습니다. 

```
pi@raspberrypi:~/work $ echo 0123456789 > aaa
pi@raspberrypi:~/work $ md5sum aaa
3749f52bb326ae96782b42dc0a97b4c1  aaa
pi@raspberrypi:~/work $ echo 0123456788 > bbb
pi@raspberrypi:~/work $ md5sum bbb
80f11ae13a48c1e74537a72aa445b399  bbb
pi@raspberrypi:~/work $
```

'0123456789' 와 '0123456788' 을 보면 끝의 한글자만 다릅니다. 
바이너리로 보자면 8은 0x38이고 9는 0x39로 1비트 차이입니다. 
즉 '0123456789' 와 '0123456788' 는 바이너리로 비교하자면 단 1비트만 다른 값입니다. 

하지만 해시값은 전혀 다른 결과가 나옵니다. 
이처럼 해시함수는 조금만 바뀌어도 전혀 다른 해시값을 나타나는 특징이 있습니다. 

대표적인 해시함수 알고리즘으로는 MD5, SHA(SHA1, SHA2, SHA256 등)가 있습니다.

MD5는 128비트 해시값을 반환하는 해시함수이며, SHA 는 종류에 따라 각각 160, 224, 256, 384, 512 비트 해시값을 반환하는 해시함수이다. 

# 공개키 암호화 

암호화 알고리즘은 데이터를 알아볼 수 없도록 변경하는 알고리즘입니다. 
암호화를 하게 되면 해시 알고리즘처럼 전혀 알아볼 수 없는 형태로 바뀌며, 데이터의 일부만 바뀌어도 암호화 결과가 모두 바뀐다는 특징이 있습니다. 
해시 알고리즘과의 다른점이라면 축약하지 않기 때문에 데이터의 길이가 변경되지 않습니다. 
또한 데이터 길이가 변경되지 않기 때문에 원래의 데이터로 복원하는것이 가능합니다.(복호화)
암호화 알고리즘에 대해서는 기회가 되면 좀 더 자세히 다뤄보도록 하겠습니다. 

컴퓨터에서 사용하는 암호화 알고리즘은 크게 두가지로 구분됩니다. 

* 공개키 암호화 알고리즘
* 대칭키 암호화 알고리즘

암호화 알고리즘은 키를 이용하여 데이터를 암호화 및 복호화를 하게 됩니다. 
위의 두 알고리즘은 키의 형태에 따라 나눠지게 됩니다. 

대칭키 알고리즘은 암호화할때와 복호화할때 사용하는 키가 같은 알고리즘입니다. 
공개키 알고리즘은 암호화할때와 복호화할때 사용하는 키가 다른 알고리즘입니다. 

본 포스팅에서는 대칭키 알고리즘에 대해 간단히 알아보고 넘어가겠습니다. (나중에 자세히 알아볼께요!)
즉 키가 2개가 사용되는 알고리즘입니다. 이 두개의 키는 키쌍이라고 부르게 됩니다. 
이 중 하나는 공개키로써 누구나 알 수 있도록 공개하여 사용하며, 다른 하나는 개인키로써 자신만 알 수 있도록 사용하게 됩니다. 

공개키로 데이터를 암호화한다면 개인키로만 복호화를 할 수 있습니다. 
즉 데이터는 누구나 암호화할 수 있지만, 이 암호화 데이터는 자신만 복호화할 수 있게 됩니다.

반대로 개인키로 데이터를 암호화한다면 공개키로 복호화할 수 있습니다. 
자신이 암호화한 데이터는 누구나 복호화할 수 있다는 의미입니다. 

누구나 복호화할 수 있는 암호화 방법을 왜 사용하는걸까요?
개인키로 데이터를 하는 이러한 방식은 자신을 인증할 때 사용하게 됩니다. 

> 당신이 맞다는 것을 증명하고 싶다면 이 데이터를 당신의 개인키로 암호화해보세요.

자신의 개인키로 해당 데이터를 암호화하여 상대에게 보냅니다. 
그러면 상대는 그 사람의 공개키로 복호화를 수행합니다. 
만약 복호화 결과가 원본 데이터와 일치한다면 그 사람이 맞다는 것을 입증할 수 있습니다. 
해당 데이터는 상대의 개인키로만 암호화할 수 있고, 개인키는 상대만 알고있기 때문입니다. 
만약 상대가 아니라면 개인키를 모르기 때문에 공개키로 복호화 시 원본데이터가 아닌 다른 결과가 나타나기 때문입니다.

이와 같은 방법으로 공개키 알고리즘을 사용하여 상대를 확인하는 방법을 전자서명 알고리즘에서 사용합니다.

(To be continue....)


# 참고 

* https://d2.naver.com/helloworld/744920
